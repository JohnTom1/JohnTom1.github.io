---
layout: post
cid: 7
title: 虚拟主机环境
slug: 7
date: 2021/01/25 15:51:54
updated: 2023/11/14 15:51:40
status: publish
author: admin
categories: 
  - 服务器
tags: 
---


<span style="color:#525252;font-family:&quot;font-size:15px;white-space:normal;background-color:#FFFFFF;">ThinkPHP 支持各种各样的线上生产环境，如果你的生产环境与开发环境不符，需要稍作调整 ThinkPHP 的配置，以适应线上生产环境</span><br />
<h2 style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;padding:0px 0px 0.3em;font-family:&quot;line-height:1.225;margin:14px 0px;font-weight:400;font-size:24px;border-bottom:1px solid #EEEEEE;color:#525252;white-space:normal;background-color:#FFFFFF;">
	修改入口文件
</h2>
<p style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;margin-top:0px;margin-bottom:0px;line-height:2;padding:0px;color:#525252;font-family:&quot;font-size:15px;white-space:normal;background-color:#FFFFFF;">
	5.0默认的应用入口文件位于<code style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;font-family:Consolas, Monaco, &quot;font-size:1em;display:inline-block;border-radius:4px;padding:2px 6px;background:#F9FAFA;word-break:break-all;white-space:pre;line-height:1.3;margin:0px 5px;border:1px solid #DED9D9;">public/index.php</code>，内容如下：
</p>
<pre class="brush:php; toolbar: true; auto-links: true;">// 定义应用目录
define('APP_PATH', __DIR__ . '/../application/');
// 加载框架引导文件
require __DIR__ . '/../thinkphp/start.php';</pre>
<pre class="brush:php; toolbar: true; auto-links: true;"><span style="color:#5BC0DE;font-family:&quot;font-size:15px;white-space:normal;background-color:#F4F8FA;">入口文件位置的设计是为了让应用部署更安全，public目录为web可访问目录，其他的文件都可以放到非WEB访问目录下面。</span></pre>
<pre class="brush:php; toolbar: true; auto-links: true;">
<p style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;margin-top:0px;margin-bottom:0px;line-height:2;padding:0px;color:#525252;font-family:&quot;font-size:15px;white-space:normal;background-color:#FFFFFF;">
	我们也可以改变入口文件的位置及内容，例如把入口文件改到根目录下面改成：
</p>

<pre style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;font-family:Consolas, Monaco, &quot;font-size:15px;margin-top:14px;margin-bottom:14px;line-height:1.45;padding:16px;overflow:auto;background:#F9FAFA;border:1px solid #DED9D9;border-radius:3px;color:#525252;"><code class="ಠhighlight-container" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;font-family:Consolas, Monaco, &quot;font-size:1em;display:inline;border-radius:4px;padding:0px;background-image:initial;background-position:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;word-break:break-all;line-height:inherit;margin:0px;max-width:100%;overflow:initial;border:none;tab-size:4;"><span class="token comment" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#708090;">// 应用目录</span> <span class="token function" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#DD4A68;">define</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">(</span><span class="token string" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#669900;">'APP_PATH'</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">,</span> __DIR__<span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">.</span><span class="token string" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#669900;">'/apps/'</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">)</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">;</span> <span class="token comment" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#708090;">// 加载框架引导文件</span> require <span class="token string" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#669900;">'./thinkphp/start.php'</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">;</span> </code></pre>
<blockquote class="default" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;margin:8px 0px;line-height:1.2;padding:8px 16px;color:#5BC0DE;border-left:5px solid #5BC0DE;background-color:#F4F8FA;font-family:&quot;font-size:15px;white-space:normal;">
	<p style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;margin-top:0px;margin-bottom:0px;line-height:2;padding:0px;">
		注意：APP_PATH的定义支持相对路径和绝对路径，但必须以“/”结束
	</p>
</blockquote>
<p style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;margin-top:0px;margin-bottom:0px;line-height:2;padding:0px;color:#525252;font-family:&quot;font-size:15px;white-space:normal;background-color:#FFFFFF;">
	如果你调整了框架核心目录的位置或者目录名，只需要这样修改：
</p>
<pre style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;font-family:Consolas, Monaco, &quot;font-size:15px;margin-top:14px;margin-bottom:14px;line-height:1.45;padding:16px;overflow:auto;background:#F9FAFA;border:1px solid #DED9D9;border-radius:3px;color:#525252;"><code class="ಠhighlight-container" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;font-family:Consolas, Monaco, &quot;font-size:1em;display:inline;border-radius:4px;padding:0px;background-image:initial;background-position:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;word-break:break-all;line-height:inherit;margin:0px;max-width:100%;overflow:initial;border:none;tab-size:4;"><span class="token comment" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#708090;">// 改变应用目录的名称</span> <span class="token function" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#DD4A68;">define</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">(</span><span class="token string" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#669900;">'APP_PATH'</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">,</span> __DIR__<span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">.</span><span class="token string" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#669900;">'/apps/'</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">)</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">;</span> <span class="token comment" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#708090;">// 加载框架引导文件</span> require <span class="token string" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#669900;">'./think/start.php'</span><span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">;</span> </code></pre>
<p style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;margin-top:0px;margin-bottom:0px;line-height:2;padding:0px;color:#525252;font-family:&quot;font-size:15px;white-space:normal;background-color:#FFFFFF;">
	这样最终的应用目录结构如下：
</p>
<pre style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;font-family:Consolas, Monaco, &quot;font-size:15px;margin-top:14px;margin-bottom:0px;line-height:1.45;padding:16px;overflow:auto;background:#F9FAFA;border:1px solid #DED9D9;border-radius:3px;color:#525252;"><code class="ಠhighlight-container" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;font-family:Consolas, Monaco, &quot;font-size:1em;display:inline;border-radius:4px;padding:0px;background-image:initial;background-position:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;word-break:break-all;line-height:inherit;margin:0px;max-width:100%;overflow:initial;border:none;tab-size:4;">www  WEB部署目录（或者子目录）
├─index<span class="token punctuation" style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;text-size-adjust:none;-webkit-font-smoothing:antialiased;color:#999999;">.</span>php       应用入口文件
├─apps            应用目录
└─think           框架目录</code></pre>
官方文档https://www.kancloud.cn/manual/thinkphp5/129746<br />
</pre>